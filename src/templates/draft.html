{% extends "base.html" %}
{% block content %}
    <h3 style='color: #ccc;font-size: 30px;'>No message yet</h3>
    <div  class="room_holder"></div>
    <div  class="message_holder"></div>


    <ul id="messages"></ul>
        <input type="text" id="myname" placeholder="name"/>
        <input type="text" id="myMessage" placeholder="Messages"/>
        <button id="sendbutton">Send</button>
    <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {

        var socket =io.connect('http://' +document.domain + ':' + location.port, {transports: ['websocket']});

        socket.on('connect', function() {
            socket.send('user has connected!');
        });  //end connect

        socket.on('message', function(msg) {
            $('#messages').append('<li>'+ msg.name + ': ' + msg.message +'</li>');
            console.log('message received')
        });  //end message

        $('#sendbutton').on('click', function() {
            let name = $('#myname').val();
            let message = $('myMessage').val();
            stuff={'name': name, 'message': message};
            socket.send(stuff);
            $('myMessage').val('');
        });  //end click

    });  //end ready
    //var socket =io.connect('http://' +document.domain + ':' + location.port, {transports: ['websocket']});
    //socket.on('connect', function() {
    //    console.log('this is javascript connect script')
    //    socket.emit('first_comm', 'this is javascript send to message');
    //    });

    //socket.on('response', function(msg) {
    //    console.log('this is the javascript response script ' +msg)
    //    $( 'div.room_holder').append( '<div><b style="color: #000">Room:  : </b>'+msg.room+'</div>' )
    //    });

    //$('#load').on('submit', function() {
    //    let user_name = $('input.username').val();
    //    let user_input =$('input.message').val();
    //        socket.emit('chatter', {
    //                'username' : user_name,
    //                'message' : user_input
    //                })
    //});

    //socket.on('chat_resp', function(msg) {
    //    $( 'h3' ).remove();
    //    $( 'div.message_holder').append( '<div><b style="color: #000">' +msg.username + ' : </b>'+msg.message+'</div>' )


    </script>


{% endblock %}