{% extends "base.html" %}
{% block content %}


<body>

    <div class="container">
        <h3>Welcome!  Best programming language</h3>
            <form>
                <input type="text" size="15" name="proglang" id="text_input" >
                <a href="#" id="process_input1"><button class="btn btn-default">Submit</button></a>
            </form>
            <div class="input-group mb-3">
                <a href="#" id="process_input"><select class="custom-select" id="series_drop_down" name="series_drop_down">
                    <option>Choose Series</option>
                    <option selected value="CUP">CUP</option>
                    <option value="XFINITY">XFINITY</option>
                    <option value="TRUCK">TRUCK</option>
                </select></a>
            </div>
        <p>{{ ser_list[30]["race_name"] }}</p>
        <p id="result"></p>
   </div>
        <ul class="list-group" id="other">
            <li class="list-group-item" id="first"></li>
        </ul>

<script>
    $(document).ready(function() {
        $('#process_input1').bind('click', function() {
            $('#series_drop_down option').remove();
            $.ajax({
            type: "GET",
            url: "/backgroundProcess",
            processData: "true",
            data: {proglang: $('input[name="proglang"]').val()},
            dataType:"json",
            success: function(data) {
                //var stuff = data[40].race_name;
                console.log(data);
                console.log(stuff);
                //$("#series_drop_down").append('<option>' + stuff + '</option>');
                race_data = '';
                $.each(data, function() {
                    race_data += '<option>'+ $(this).attr('race_name') + '@' + $(this).attr('track') +'</option>';
                });  // end each
                $('#series_drop_down').append(race_data);
            }  //end success
            });  //end ajax
        });  // end process input
    });  //end ready

    //$("#series_drop_down").text(data[0]["race_name"]);
    //},
    //error: function(x,y,z) {
    //console.log(x);
    //console.log(y);
    //console.log(z);
    //}

   // $.getJSON('/backgroundProcess', {
   // 'proglang' : $('input[name="proglang"]').val(),
   // }, function(data) {
   // $("#result").text(data.result);

    //});
    //return false;
    //});  // end process_input
    //});  //end ready
</script>

</body>


{% endblock %}